@{
    ViewData["Title"] = "Home Page";
}

<script src="https://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script>

<div class="frame">
    <div id="map_canvas"></div>
    @section scripts {
        <section class="scripts">
            <script type="text/javascript">
                $(document).ready(function () { Initialize(); });


                function Initialize() {
                    google.maps.visualRefresh = true;
                    var budapest = new google.maps.LatLng(47.495990767813986, 19.043523925104356);

                    var mapOptions = {
                        zoom: 14,
                        center: budapest,
                        mapTypeId: google.maps.MapTypeId.G_NORMAL_MAP
                    };

                    var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

                    /*
                    var myLatlng = new google.maps.LatLng(53.40091, -2.994464);
                    var marker = new google.maps.Marker({
                        position: myLatlng,
                        map: map,
                        title: 'Tate Gallery'
                    });

                    marker.setIcon('http://maps.google.com/mapfiles/ms/icons/green-dot.png');

                    var infowindow = new google.maps.InfoWindow({
                        content: "<div class='infoDiv'><h2>" +
                            "Hello" + "</h2></div>"
                    });
                    */

                    var info;

                    // google.maps.event.addListener(marker, 'click', function () { infowindow.open(map, marker); });

                    map.addListener("click", (mouseEvent) => {
                        console.log(mouseEvent);

                        if (info) {
                            info.close();
                        }

                        info = new google.maps.InfoWindow({ position: mouseEvent.latLng, content: JSON.stringify(mouseEvent.latLng.toJSON(), null, 2) });
                        info.open(map);
                    });
                }
            </script>
        </section>
    }
</div>

<style>
    #map_canvas, .frame {
        display: flex;
        flex-direction: column;
        flex-grow: 1;
    }

    #map_canvas img {
        max-width: none;
    }

    .info-popup {
        height: 100px;
        width: 150px;
        -webkit-user-select: none;
        background-color: white;
    }
</style>